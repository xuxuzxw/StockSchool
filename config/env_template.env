# =============================================================================
# StockSchool 环境变量配置模板
# 请根据实际环境复制并修改此文件
# =============================================================================

# =============================================================================
# 环境标识配置
# =============================================================================
ENVIRONMENT=development                    # 环境类型: development/staging/production/acceptance
APP_NAME=StockSchool                      # 应用名称
APP_VERSION=1.0.0                         # 应用版本
DEBUG=true                                # 调试模式: true/false
LOG_LEVEL=INFO                            # 日志级别: DEBUG/INFO/WARNING/ERROR
TZ=Asia/Shanghai                          # 时区设置
TIMEZONE=Asia/Shanghai                    # 时区设置(备用)

# =============================================================================
# 数据库配置 (PostgreSQL + TimescaleDB)
# =============================================================================
POSTGRES_HOST=localhost                   # 数据库主机地址
POSTGRES_PORT=5432                        # 数据库端口
POSTGRES_DB=stockschool                   # 数据库名称
POSTGRES_USER=stockschool                 # 数据库用户名
POSTGRES_PASSWORD=your_password_here      # 数据库密码
DATABASE_URL=postgresql://user:pass@host:port/db  # 完整数据库连接字符串

# 数据库连接池配置
DB_POOL_SIZE=20                           # 连接池大小
DB_MAX_OVERFLOW=30                        # 连接池最大溢出
DB_POOL_TIMEOUT=30                        # 连接超时时间(秒)
DB_POOL_RECYCLE=3600                      # 连接回收时间(秒)

# 测试数据库配置
TEST_POSTGRES_DB=stockschool_test         # 测试数据库名称
TEST_POSTGRES_USER=stockschool_test       # 测试数据库用户名
TEST_POSTGRES_PASSWORD=test123            # 测试数据库密码

# =============================================================================
# Redis配置
# =============================================================================
REDIS_HOST=localhost                      # Redis主机地址
REDIS_PORT=6379                           # Redis端口
REDIS_PASSWORD=your_redis_password        # Redis密码
REDIS_DB=0                                # Redis数据库编号
REDIS_URL=redis://:password@host:port/db  # 完整Redis连接字符串

# Redis连接池配置
REDIS_POOL_SIZE=20                        # Redis连接池大小
REDIS_POOL_TIMEOUT=10                     # Redis连接超时时间
REDIS_MAX_CONNECTIONS=50                  # Redis最大连接数

# 测试Redis配置
TEST_REDIS_DB=1                           # 测试Redis数据库编号

# =============================================================================
# 数据源API配置
# =============================================================================
# Tushare API配置
TUSHARE_TOKEN=your_tushare_token_here     # Tushare API令牌
TUSHARE_BASE_URL=http://api.tushare.pro   # Tushare API基础URL
TUSHARE_TIMEOUT=30                        # Tushare API超时时间
TUSHARE_MAX_RETRIES=3                     # Tushare API最大重试次数

# AkShare API配置
AKSHARE_TOKEN=your_akshare_token_here     # AkShare API令牌
AKSHARE_ENABLED=true                      # 是否启用AkShare
AKSHARE_TIMEOUT=20                        # AkShare API超时时间

# =============================================================================
# AI大模型API配置
# =============================================================================
# OpenAI API配置
OPENAI_API_KEY=your_openai_api_key        # OpenAI API密钥
OPENAI_BASE_URL=https://api.openai.com/v1 # OpenAI API基础URL
OPENAI_MODEL=gpt-4                        # 使用的模型名称

# Gemini API配置
GEMINI_API_KEY=your_gemini_api_key        # Gemini API密钥

# AI API通用配置
AI_API_TIMEOUT=30                         # AI API超时时间
AI_API_MAX_RETRIES=3                      # AI API最大重试次数
AI_API_TEMPERATURE=0.1                    # AI模型温度参数

# =============================================================================
# 应用服务端口配置
# =============================================================================
APP_PORT=8000                             # 主应用端口
API_PORT=5000                             # API服务端口
DASHBOARD_PORT=8080                       # 仪表板端口
GRAFANA_PORT=3000                         # Grafana端口
PROMETHEUS_PORT=9090                      # Prometheus端口
FLOWER_PORT=5555                          # Flower端口
NGINX_PORT=80                             # Nginx HTTP端口
NGINX_SSL_PORT=443                        # Nginx HTTPS端口

# =============================================================================
# 安全配置
# =============================================================================
SECRET_KEY=your_secret_key_here           # 应用密钥(至少32字符)
JWT_SECRET_KEY=your_jwt_secret_key        # JWT密钥
JWT_ALGORITHM=HS256                       # JWT算法
JWT_EXPIRATION_HOURS=24                   # JWT过期时间(小时)

# API安全配置
API_RATE_LIMIT_PER_MINUTE=100             # API每分钟请求限制
API_RATE_LIMIT_PER_HOUR=1000              # API每小时请求限制
ALLOWED_HOSTS=localhost,127.0.0.1         # 允许的主机列表
CORS_ORIGINS=http://localhost:8000        # CORS允许的源

# =============================================================================
# 数据同步配置
# =============================================================================
# 数据更新配置
DATA_UPDATE_INTERVAL=60                   # 数据更新间隔(分钟)
HISTORY_DAYS=1000                         # 历史数据回溯天数
MAX_CONCURRENT_REQUESTS=10                # 最大并发请求数
REQUEST_INTERVAL=0.2                      # 请求间隔(秒)

# 同步调度配置
SYNC_SCHEDULE=0 2 * * *                   # 同步调度(cron表达式)
SYNC_BATCH_SIZE=1000                      # 同步批次大小
SYNC_RETRY_TIMES=3                        # 同步重试次数
SYNC_RETRY_DELAY=60                       # 同步重试延迟(秒)

# =============================================================================
# 因子计算配置
# =============================================================================
FACTOR_CALCULATION_PERIOD=1               # 因子计算周期(天)
FACTOR_BACKTEST_PERIOD=252                # 因子回测周期(天)
FACTOR_SCORE_UPDATE_INTERVAL=6            # 因子评分更新间隔(小时)

# =============================================================================
# 缓存配置
# =============================================================================
CACHE_EXPIRE_TIME=3600                    # 缓存过期时间(秒)
CACHE_KEY_PREFIX=stockschool              # 缓存键前缀
CACHE_DEFAULT_TIMEOUT=300                 # 默认缓存超时时间
CACHE_MAX_ENTRIES=10000                   # 最大缓存条目数

# =============================================================================
# 文件存储路径配置
# =============================================================================
DATA_PATH=./data                          # 数据文件存储路径
LOG_PATH=./logs                           # 日志文件存储路径
CACHE_PATH=./cache                        # 缓存文件存储路径
CONFIG_PATH=./config                      # 配置文件存储路径
TEMP_DIR=./temp                           # 临时文件目录
BACKUP_PATH=./backups                     # 备份文件路径

# =============================================================================
# 机器学习配置
# =============================================================================
ML_DATASET_SIZE=10000                     # 机器学习数据集大小
ML_BATCH_SIZE=32                          # 机器学习批次大小
ML_EPOCHS=100                             # 机器学习训练轮数
ML_VALIDATION_SPLIT=0.2                   # 验证集比例

# =============================================================================
# 性能配置
# =============================================================================
# 工作进程配置
WORKER_PROCESSES=4                        # 工作进程数
WORKER_THREADS=2                          # 每个进程的线程数
MAX_WORKERS=8                             # 最大工作进程数
ASYNC_POOL_SIZE=100                       # 异步连接池大小

# API服务配置
API_WORKERS=4                             # API工作进程数
API_MAX_REQUESTS=1000                     # API最大请求数
API_MAX_REQUESTS_JITTER=100               # API请求抖动
API_TIMEOUT=30                            # API超时时间

# 数据处理配置
CHUNK_SIZE=10000                          # 数据块大小
BATCH_INSERT_SIZE=1000                    # 批量插入大小

# =============================================================================
# 监控配置
# =============================================================================
GRAFANA_PASSWORD=admin123                 # Grafana管理员密码
PROMETHEUS_RETENTION_TIME=30d             # Prometheus数据保留时间
PROMETHEUS_RETENTION_SIZE=10GB            # Prometheus数据保留大小

# 监控指标配置
MONITORING_ENABLED=true                   # 是否启用监控
METRICS_COLLECTION_INTERVAL=10            # 指标收集间隔(秒)
ENABLE_METRICS=true                       # 是否启用指标收集
ENABLE_TRACING=false                      # 是否启用链路追踪

# =============================================================================
# 日志配置
# =============================================================================
LOG_FORMAT=json                           # 日志格式: json/text
LOG_MAX_SIZE=100MB                        # 日志文件最大大小
LOG_MAX_FILES=5                           # 日志文件最大数量
LOG_RETENTION_DAYS=30                     # 日志保留天数

# 日志输出配置
LOG_TO_CONSOLE=true                       # 是否输出到控制台
LOG_TO_FILE=true                          # 是否输出到文件
LOG_TO_SYSLOG=false                       # 是否输出到系统日志

# =============================================================================
# 告警通知配置
# =============================================================================
# 邮件配置
SMTP_HOST=smtp.gmail.com                  # SMTP服务器地址
SMTP_PORT=587                             # SMTP端口
SMTP_USER=your-email@gmail.com            # SMTP用户名
SMTP_PASSWORD=your-email-password         # SMTP密码
SMTP_TLS=true                             # 是否启用TLS

# Webhook配置
DINGTALK_WEBHOOK=your-dingtalk-webhook    # 钉钉Webhook地址
WECOM_WEBHOOK=your-wecom-webhook          # 企业微信Webhook地址
ALERT_WEBHOOK_URL=your-alert-webhook      # 告警Webhook地址

# =============================================================================
# 健康检查配置
# =============================================================================
HEALTH_CHECK_INTERVAL=30s                 # 健康检查间隔
HEALTH_CHECK_TIMEOUT=10s                  # 健康检查超时时间
HEALTH_CHECK_RETRIES=3                    # 健康检查重试次数
HEALTH_CHECK_START_PERIOD=60s             # 健康检查启动等待时间

# =============================================================================
# 开发调试配置
# =============================================================================
RELOAD=true                               # 是否启用热重载
DEBUG_MODE=true                           # 是否启用调试模式
PROFILING=false                           # 是否启用性能分析
ENABLE_PROFILING=false                    # 是否启用详细性能分析
DEVELOPMENT_MODE=true                     # 是否为开发模式

# =============================================================================
# 备份配置
# =============================================================================
BACKUP_ENABLED=true                       # 是否启用备份
BACKUP_INTERVAL_HOURS=6                   # 备份间隔(小时)
BACKUP_RETENTION_DAYS=7                   # 备份保留天数
BACKUP_COMPRESSION=true                   # 是否压缩备份

# =============================================================================
# 容器资源限制
# =============================================================================
API_MEMORY_LIMIT=2G                       # API服务内存限制
API_CPU_LIMIT=1.0                         # API服务CPU限制
DATASYNC_MEMORY_LIMIT=2G                  # 数据同步服务内存限制
DATASYNC_CPU_LIMIT=1.0                    # 数据同步服务CPU限制
POSTGRES_MEMORY_LIMIT=4G                  # PostgreSQL内存限制
POSTGRES_CPU_LIMIT=2.0                    # PostgreSQL CPU限制
REDIS_MEMORY_LIMIT=1G                     # Redis内存限制
REDIS_CPU_LIMIT=0.5                       # Redis CPU限制

# =============================================================================
# 网络配置
# =============================================================================
NETWORK_SUBNET=172.20.0.0/16              # Docker网络子网
NETWORK_GATEWAY=172.20.0.1                # Docker网络网关

# =============================================================================
# 测试配置 (仅测试环境使用)
# =============================================================================
TEST_MODE=false                           # 是否为测试模式
TEST_DATA_PATH=./test_data                # 测试数据路径
TEST_REPORTS_PATH=./test_reports          # 测试报告路径
ACCEPTANCE_TEST_TIMEOUT=3600              # 验收测试超时时间
PERFORMANCE_TEST_ENABLED=false           # 是否启用性能测试
LOAD_TEST_ENABLED=false                   # 是否启用负载测试
AI_ANALYSIS_TEST_ENABLED=false            # 是否启用AI分析测试
SECURITY_TEST_ENABLED=false               # 是否启用安全测试

# 测试股票池配置
TEST_STOCK_CODES=000001.SZ,000002.SZ      # 测试股票代码列表
TEST_DATE_RANGE_START=2024-01-01          # 测试日期范围开始
TEST_DATE_RANGE_END=2024-12-31            # 测试日期范围结束

# =============================================================================
# 生产环境配置示例 (生产环境时取消注释并修改)
# =============================================================================
# ENVIRONMENT=production
# DEBUG=false
# LOG_LEVEL=WARNING
# POSTGRES_PASSWORD=your-strong-production-password
# REDIS_PASSWORD=your-strong-redis-password
# SECRET_KEY=your-very-strong-secret-key-for-production
# JWT_SECRET_KEY=your-very-strong-jwt-secret-key-for-production