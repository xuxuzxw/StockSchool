# StockSchool 验收测试环境配置文件
# 此文件包含验收测试所需的所有环境变量

# ==================== 环境标识 ====================
ENVIRONMENT=acceptance
TEST_MODE=true
DEBUG=true

# ==================== 数据库配置 ====================
# PostgreSQL + TimescaleDB 配置
POSTGRES_DB=stockschool_acceptance
POSTGRES_USER=acceptance_user
POSTGRES_PASSWORD=acceptance_pass_2024
POSTGRES_HOST=localhost
POSTGRES_PORT=5433
DATABASE_URL=postgresql://acceptance_user:acceptance_pass_2024@localhost:5433/stockschool_acceptance

# 数据库连接池配置
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ==================== Redis 配置 ====================
REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=acceptance_redis_2024
REDIS_URL=redis://:acceptance_redis_2024@localhost:6380/0
REDIS_DB=0

# Redis 连接池配置
REDIS_POOL_SIZE=20
REDIS_POOL_TIMEOUT=10

# ==================== 外部API配置 ====================
# Tushare API 配置
TUSHARE_TOKEN=your_tushare_token_here
TUSHARE_BASE_URL=http://api.tushare.pro
TUSHARE_TIMEOUT=30
TUSHARE_MAX_RETRIES=3

# AkShare API 配置（备用数据源）
AKSHARE_ENABLED=true
AKSHARE_TIMEOUT=20

# 外接AI大模型API配置
AI_API_KEY=your_ai_api_key_here
AI_API_BASE_URL=https://api.your-ai-provider.com
AI_API_TIMEOUT=30
AI_API_MAX_RETRIES=3
AI_API_MODEL=gpt-4
AI_API_TEMPERATURE=0.1

# ==================== 验收测试配置 ====================
# 测试数据路径
TEST_DATA_PATH=./test_data
GOLDEN_DATA_PATH=./test_data/golden_data
SAMPLE_DATA_PATH=./test_data/sample_data
TEST_REPORTS_PATH=./test_reports

# 测试执行配置
ACCEPTANCE_TEST_TIMEOUT=3600
PERFORMANCE_TEST_ENABLED=true
LOAD_TEST_ENABLED=true
AI_ANALYSIS_TEST_ENABLED=true
SECURITY_TEST_ENABLED=true

# 测试股票池
TEST_STOCK_CODES=000001.SZ,000002.SZ,600000.SH,600036.SH,000858.SZ
TEST_DATE_RANGE_START=2024-01-01
TEST_DATE_RANGE_END=2024-12-31

# ==================== 性能基准配置 ====================
# 性能阈值设置
DOCKER_STARTUP_TIME_LIMIT=60
DATABASE_CONNECTION_TIME_LIMIT=5
API_RESPONSE_TIME_LIMIT=1
FACTOR_CALCULATION_TIME_LIMIT=30
AI_ANALYSIS_TIME_LIMIT=30
BATCH_PROCESSING_RATE_MIN=100

# 资源使用限制
MEMORY_USAGE_LIMIT_GB=16
CPU_USAGE_LIMIT_PERCENT=80
DISK_USAGE_LIMIT_PERCENT=85

# AI API 性能要求
AI_API_SUCCESS_RATE_MIN=0.99
AI_OPTIMIZATION_RETURN_IMPROVEMENT_MIN=0.10
AI_OPTIMIZATION_DRAWDOWN_REDUCTION_MIN=0.05

# ==================== 日志配置 ====================
LOG_LEVEL=DEBUG
LOG_FORMAT=json
LOG_FILE=./logs/acceptance_test.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# 日志输出配置
LOG_TO_CONSOLE=true
LOG_TO_FILE=true
LOG_TO_SYSLOG=false

# ==================== 监控配置 ====================
# 监控指标配置
MONITORING_ENABLED=true
METRICS_COLLECTION_INTERVAL=10
ALERT_WEBHOOK_URL=https://your-webhook-url.com/alerts

# 监控覆盖率要求
MONITORING_METRICS_MIN_COUNT=50
ALERT_ACCURACY_RATE_MIN=0.95
ALERT_FALSE_POSITIVE_RATE_MAX=0.05

# ==================== 安全配置 ====================
# API 安全配置
JWT_SECRET_KEY=acceptance_jwt_secret_key_2024
JWT_EXPIRATION_HOURS=24
API_RATE_LIMIT_PER_MINUTE=100
API_RATE_LIMIT_PER_HOUR=1000

# 数据加密配置
DATA_ENCRYPTION_KEY=acceptance_data_encryption_key_2024
BACKUP_ENCRYPTION_ENABLED=true

# ==================== 代码质量配置 ====================
# 代码质量阈值
CODE_DUPLICATION_RATE_MAX=0.05
CODE_COVERAGE_MIN=0.90
PYLINT_SCORE_MIN=8.0
FLAKE8_MAX_COMPLEXITY=10

# ==================== UI测试配置 ====================
# 界面测试配置
UI_TEST_ENABLED=true
UI_4K_SUPPORT_TEST=true
UI_MOBILE_TEST=true
UI_LOAD_TIME_LIMIT=2

# 分辨率测试配置
TEST_RESOLUTIONS=1920x1080,2560x1440,3840x2160
BROWSER_TEST_ENABLED=true
HEADLESS_BROWSER=true

# ==================== 备份和恢复配置 ====================
# 备份配置
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=6
BACKUP_RETENTION_DAYS=7
BACKUP_COMPRESSION=true

# 恢复测试配置
RECOVERY_TEST_ENABLED=true
RECOVERY_TIME_LIMIT_MINUTES=10

# ==================== 开发和调试配置 ====================
# 开发模式配置
DEVELOPMENT_MODE=false
MOCK_EXTERNAL_APIS=false
SKIP_SLOW_TESTS=false
PARALLEL_TEST_EXECUTION=true
MAX_PARALLEL_WORKERS=4

# 调试配置
ENABLE_PROFILING=true
ENABLE_MEMORY_TRACKING=true
ENABLE_PERFORMANCE_MONITORING=true

# ==================== 通知配置 ====================
# 测试结果通知
NOTIFICATION_ENABLED=true
EMAIL_NOTIFICATIONS=false
SLACK_WEBHOOK_URL=https://hooks.slack.com/your-webhook
DINGTALK_WEBHOOK_URL=https://oapi.dingtalk.com/your-webhook

# ==================== 其他配置 ====================
# 时区配置
TIMEZONE=Asia/Shanghai
LOCALE=zh_CN.UTF-8

# 临时文件配置
TEMP_DIR=./temp
CLEANUP_TEMP_FILES=true

# 并发配置
MAX_CONCURRENT_TESTS=10
TEST_EXECUTION_TIMEOUT=7200