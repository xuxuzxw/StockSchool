### **项目代号：StockSchool - AI辅助构建指令清单**



**核心指令**:

> 你好，AI。我们将共同构建一个名为“StockSchool”的专业量化投研系统。我将为你提供一系列精确、分步的指令。你的任务是严格按照指令创建和修改文件、执行终端命令，并向我报告每一步的完成情况。
>
> 让我们从初始化项目开始。

------

<!-- 技术栈概览已更新，请参考 StockSchool_完整程序构建指南.md 中的“核心技术栈”部分。 -->




### **阶段零：项目初始化与环境设置**



**【指令 1/13】**

> **任务**:
> 创建项目目录结构和核心配置文件。
>
> **请执行以下终端命令**:
>
> Bash
>
> ```
> # 1. 创建主目录和所有子目录
> mkdir -p stockschool/src/{ai,api,compute,config,data,database,features,monitoring,strategy,tests,ui,utils,websocket}
> ```

> # 2. 创建空的Python包文件
>
>
>
> touch stockschool/src/{ai,api,compute,config,data,database,features,monitoring,strategy,tests,ui,utils,websocket}/__init__.py

> # 3. 创建核心配置文件
>
>
>
> touch stockschool/requirements.txt <!-- .env 文件通常不直接创建，而是通过 .env.example 复制而来。 --> touch stockschool/docker-compose.yml touch stockschool/Dockerfile touch stockschool/README.md
>
> ```
> **完成后，请告诉我“项目结构创建完毕”。**
> ```

------



### **阶段一：数据库与数据模型构建 (地基工程)**



**【指令 2/13】**

> **任务**:
> 定义项目的依赖项，并创建数据库Schema。
>
> 1. **修改文件 `stockschool/requirements.txt`**,
> 写入以下内容:
>
>    Plaintext
>
>    ```
>    pandas==2.0.3
>    numpy==1.24.3
>    tushare==1.2.88
>    akshare==1.10.3
>    psycopg2-binary==2.9.7
>    SQLAlchemy==2.0.20
>    timescaledb-toolkit-python==1.2.0
>    python-dotenv==1.0.0
>    celery==5.3.1
>    redis==4.6.0
>    requests==2.31.0
>    pytest==7.4.0
>    scikit-learn==1.3.0
>    SHAP==0.43.0
>    matplotlib==3.7.2
>    plotly==5.15.0
>    pynvml==11.5.0
>    psutil==5.9.5
>    loguru==0.7.0
>    FastAPI==0.100.0
>    uvicorn==0.23.2
>    python-multipart==0.0.6
>    PyYAML==6.0.1
>    ```
>
> 2. **创建新文件 `stockschool/database_schema.sql`**,
写入以下SQL代码，它定义了我们所有的表结构和索引:

   SQL

   ```sql
   -- 启用TimescaleDB扩展 (如果尚未启用)
   CREATE EXTENSION IF NOT EXISTS timescaledb;

   -- 1. 日线行情表 (Hypertable)
   CREATE TABLE stock_daily (
       trade_date  DATE        NOT NULL,
       ts_code     VARCHAR(10) NOT NULL,
       open        NUMERIC(10, 2),
       high        NUMERIC(10, 2),
       low         NUMERIC(10, 2),
       close       NUMERIC(10, 2),
       pre_close   NUMERIC(10, 2),
       vol         BIGINT,
       amount      NUMERIC(20, 2)
   );
   SELECT create_hypertable('stock_daily', 'trade_date');
   CREATE INDEX idx_stock_daily_ts_code_date ON stock_daily (ts_code, trade_date DESC);

   -- 2. 财务报表数据表
   CREATE TABLE financial_reports (
       ts_code     VARCHAR(10) NOT NULL,
       ann_date    DATE,
       end_date    DATE        NOT NULL,
       revenue     NUMERIC(20, 2),
       net_profit  NUMERIC(20, 2),
       total_assets NUMERIC(20, 2),
       PRIMARY KEY (ts_code, end_date)
   );

   -- 3. 行业分类历史追踪表
   CREATE TABLE sw_industry_history (
       ts_code     VARCHAR(10) NOT NULL,
       start_date  DATE        NOT NULL,
       end_date    DATE,
       l1_code     VARCHAR(20),
       l1_name     VARCHAR(50),
       l2_code     VARCHAR(20),
       l2_name     VARCHAR(50),
       l3_code     VARCHAR(20),
       l3_name     VARCHAR(50),
       PRIMARY KEY (ts_code, start_date)
   );
   ```
>
> **完成后，请告诉我“项目依赖与数据库Schema定义完毕”。**

**【指令 3/13】**

> **任务**:
> 配置Docker环境。
>
> 1. **修改文件 `stockschool/Dockerfile`**,
写入以下内容:

   Dockerfile

   ```dockerfile
   # 使用官方Python运行时作为父镜像
   FROM python:3.11-slim-buster

   # 设置工作目录
   WORKDIR /app

   # 将当前目录内容复制到容器中的/app
   COPY . /app

   # 安装所有依赖
   RUN pip install --no-cache-dir -r requirements.txt

   # 暴露应用程序端口
   EXPOSE 8000

   # 定义环境变量
   ENV PYTHONUNBUFFERED 1

   # 运行应用程序
   CMD ["uvicorn", "src.main:app", "--host", "0.0.0.0", "--port", "8000"]
   ```
>
> 2. **修改文件 `stockschool/docker-compose.yml`**,
> 写入以下内容:
>
>    YAML

   ```yaml
   version: '3.8'
   services:
     db:
       image: timescale/timescaledb:latest-pg14
       container_name: stockschool_db
       volumes:
         - postgres_data:/var/lib/postgresql/data
       environment:
         POSTGRES_USER: user
         POSTGRES_PASSWORD: ${DB_PASSWORD}
         POSTGRES_DB: stockschool
       ports:
         - "5432:5432"
       healthcheck:
         test: ["CMD-SHELL", "pg_isready -U user -d stockschool"]
         interval: 5s
         timeout: 5s
         retries: 5
     redis:
       image: "redis:alpine"
       container_name: stockschool_redis
       ports:
         - "6379:6379"
     app:
       build:
         context: .
         dockerfile: Dockerfile
       container_name: stockschool_app
       depends_on:
         db:
           condition: service_healthy
         redis:
           condition: service_started
       volumes:
         - .:/app
       env_file:
         - .env
       ports:
         - "8000:8000"
       command: uvicorn src.main:app --host 0.0.0.0 --port 8000
     worker:
       build:
         context: .
         dockerfile: Dockerfile
       container_name: stockschool_worker
       depends_on:
         - db
         - redis
       volumes:
         - .:/app
       env_file:
         - .env
       command: celery -A src.main.celery_app worker --loglevel=info
   volumes:
     postgres_data:
   ```
>
> 3. **创建新文件 `stockschool/.env`**,
写入以下内容:

   Plaintext

   ```
   DB_PASSWORD=your_strong_password
   TS_TOKEN=your_tushare_token
   AK_TOKEN=your_akshare_token
   REDIS_URL=redis://redis:6379/0
   CELERY_BROKER_URL=redis://redis:6379/0
   CELERY_RESULT_BACKEND=redis://redis:6379/0
   ```
> <!-- .env 文件内容已更新，请参考 StockSchool_完整程序构建指南.md 中的“环境要求”部分。 -->
>
>    代码段
>
>    ```
~~# StockSchool 完整程序构建指南~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~## 项目概述~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~StockSchool是一个基于Python 3.11的量化投研系统，采用"学校"隐喻构建智能股票分析和推荐平台。系统将股票视为"学生"，各种量化因子作为"老师"进行评分，AI模型作为"校长"进行综合决策。~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~### 核心理念~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **数据层**: 多维度数据获取和存储（Tushare为主，AkShare为辅）~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **计算层**: 三大"教研组"因子计算（技术面、基本面、情绪面）~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **决策层**: AI"校长"智能决策和模型解释~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~## 技术架构总览~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~### 系统架构图~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~```~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~StockSchool/~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── 数据获取层 (src/data/)~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── Tushare数据源~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── AkShare数据源~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   └── 数据质量监控~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── 数据存储层 (PostgreSQL + TimescaleDB)~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── 基础信息表~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── 时序行情数据~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── 财务数据~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   └── 因子数据~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── 计算引擎层 (src/compute/)~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── 技术因子引擎~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── 基本面因子引擎~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── 情绪因子引擎~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   └── 因子标准化和评分~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── AI决策层 (src/ai/)~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── 模型训练流水线~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── 预测引擎~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   └── 模型解释器~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── API服务层 (src/api/)~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── RESTful API~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── 认证授权~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   └── 特征商店API~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── 监控告警层 (src/monitoring/)~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── 性能监控~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── 数据质量监控~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   └── 告警通知~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~└── 任务调度层 (Celery + Redis)~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~    ├── 数据同步任务~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~    ├── 因子计算任务~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~    └── AI训练预测任务~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~```~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~## 核心技术栈~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~### 后端框架~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **Python**: 3.11 (必需版本)~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **Web框架**: FastAPI 0.100.0~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **异步处理**: Celery 5.3.1 + Redis 4.6.0~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **数据库**: PostgreSQL 12+ + TimescaleDB扩展~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~### 数据处理~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **数据获取**: Tushare 1.2.88, AkShare 1.10.3~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **数据处理**: pandas 2.0.3, numpy 1.24.3~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **数据库连接**: psycopg2-binary 2.9.7~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~### 机器学习~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **核心库**: scikit-learn 1.3.0~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **深度学习**: PyTorch 1.13.1+cu117 {推荐GPU版本}~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **模型解释**: SHAP 0.43.0 {支持CUDA加速}~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **可视化**: matplotlib 3.7.2, plotly 5.15.0~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~### 系统监控~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **GPU监控**: pynvml 11.5.0~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **系统监控**: psutil 5.9.5~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **日志系统**: loguru 0.7.0~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~## 环境要求~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~### 硬件要求~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **CPU**: 推荐12核以上，支持多线程处理~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **内存**: 至少32GB RAM（推荐48GB）~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **GPU**: 可选，需CUDA 11.7+驱动支持~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **存储**: 至少100GB可用空间~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~### 软件环境~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **操作系统**: Windows 10/11, Linux, macOS~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **Python**: 3.11 (严格要求)~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **数据库**: PostgreSQL 12+ with TimescaleDB~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- **容器**: Docker + Docker Compose (推荐)~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~## 项目结构详解~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~### 源代码结构~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~```~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~src/~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── __init__.py                 # 包初始化~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── main.py                     # 主入口文件~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── check_stocks.py            # 股票检查工具~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── ai/                        # AI模型模块~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── training_pipeline.py   # 模型训练流水线~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── prediction.py          # 预测引擎~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   └── model_explainer.py     # 模型解释器~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── api/                       # API接口模块~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── main.py               # API主入口~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── factor_api.py         # 因子相关API~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── auth.py               # 认证授权~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   └── feature_store_api.py  # 特征商店API~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── compute/                   # 计算引擎模块~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── factor_engine.py      # 因子计算引擎~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── technical_factor_engine.py    # 技术因子引擎~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── fundamental_factor_engine.py  # 基本面因子引擎~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── sentiment_factor_engine.py    # 情绪因子引擎~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── factor_standardizer.py       # 因子标准化器~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── factor_effectiveness_analyzer.py # 因子有效性分析~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── parallel_factor_calculator.py    # 并行计算器~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── incremental_calculator.py        # 增量计算器~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── factor_cache.py              # 因子缓存~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── data_compression_archiver.py # 数据压缩归档~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── indicators.py         # 技术指标库~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── processing.py         # 因子预处理~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── quality.py           # 数据质量控制~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   └── tasks.py             # Celery任务定义~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── config/                   # 配置管理模块~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── manager.py           # 配置管理器~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── unified_config.py    # 统一配置管理器~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   └── migration_guide.py   # 配置迁移工具~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── data/                    # 数据同步模块~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── sources/             # 数据源实现~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── sync_manager.py      # 同步管理器~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── incremental_update.py # 增量更新~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── industry_classification.py # 行业分类~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   └── data_quality_monitor.py    # 数据质量监控~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── database/                # 数据库相关~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── features/                # 特征商店模块~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── factor_feature_store.py    # 因子特征商店~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   └── feature_store_adapter.py   # 特征商店适配器~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── monitoring/              # 监控告警模块~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── alerts.py           # 告警引擎~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── performance.py      # 性能监控~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   └── notifications.py    # 通知渠道~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── strategy/               # 策略评估模块~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── evaluation.py       # 策略评估~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   └── ai_model.py         # AI模型管理~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── tests/                  # 测试模块~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── ui/                     # 用户界面模块~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── utils/                  # 工具函数模块~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── config_loader.py    # 配置加载器~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── db.py              # 数据库工具~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   ├── gpu_utils.py       # GPU工具~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~│   └── retry.py           # 重试装饰器~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~└── websocket/             # WebSocket模块~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~```~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~### 配置文件结构~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~```~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~config/~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── base.yml              # 基础配置~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── factor_config.yaml    # 因子计算配置~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── monitoring.yaml       # 监控告警配置~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── development.yml       # 开发环境配置~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── production.yml        # 生产环境配置~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~└── testing.yml          # 测试环境配置~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~```~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~### 脚本工具~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~```~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~scripts/~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── deployment/           # 部署脚本~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── monitoring/          # 监控脚本~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── clear_database.py    # 数据库清理~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── full_test_v1_1_6.py  # 全流程测试~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~├── migrate_config_system.py # 配置迁移~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~└── performance_test_runner.py # 性能测试~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~```~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~## 数据库设计~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~### 核心表结构~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~#### 基础信息表~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `stock_basic`: 股票基础信息~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `trade_calendar`: 交易日历~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `sw_industry_classify`: 申万行业分类~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~#### 时序数据表 (TimescaleDB超表)~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `stock_daily`: 日线行情数据~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `daily_basic`: 每日基本指标~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `adj_factor`: 复权因子~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~#### 财务数据表~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `income`: 利润表~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `balance_sheet`: 资产负债表~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `cash_flow`: 现金流量表~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `financial_indicator`: 财务指标~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~#### 因子数据表 (宽表设计)~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `technical_factors`: 技术面因子宽表~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `fundamental_factors`: 基本面因子宽表~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `sentiment_factors`: 情绪面因子宽表~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `factor_metadata`: 因子元数据表~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `factor_scores`: 因子评分表~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->

~~#### 特征商店表~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~- `factor_definitions`: 因子定义~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
~~```~~ <!-- 此内容在StockSchool_完整程序构建指南.md中不存在或已修改 -->
